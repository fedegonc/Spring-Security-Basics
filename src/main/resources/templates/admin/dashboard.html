<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Administración</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <!-- Fuentes -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap" rel="stylesheet">
    <!-- Glass card header styles -->
    <link rel="stylesheet" th:href="@{/css/header-glass.css}">
    <!-- Estilos propios -->
    <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>

<body class="app-background d-flex flex-column min-vh-100">

<!-- Navbar con estilo glass card -->
<nav class="navbar navbar-expand-lg navbar-glass admin-navbar">
    <div class="container">
        <a class="navbar-brand" th:href="@{/admin/dashboard}">
            <i class="bi bi-recycle"></i> RSU - Residuo Sólido Urbano
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarAdminContent">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarAdminContent">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                        <i class="bi bi-shield-lock"></i> 
                        <span th:text="${#authentication.principal.username}">Administrador</span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li>
                            <a class="dropdown-item" th:href="@{/admin/profile}">
                                <i class="bi bi-person-gear"></i> Mi Perfil
                            </a>
                        </li>
                        <li><hr class="dropdown-divider"></li>
                        <li>
                            <a class="dropdown-item" th:href="@{/logout}">
                                <i class="bi bi-box-arrow-right"></i> Cerrar Sesión
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- Contenido principal -->
<div id="main" class="container mt-4 flex-grow-1">
    
    <div class="row g-4">
        <!-- Panel lateral (33%) -->
        <div class="col-12 col-md-4">
            <div class="glass-card h-100 d-flex flex-column">
                <h2 class="fs-4 fw-bold mb-4">Panel de Administración</h2>
                
                <div class="text-center mb-4">
                    <img src="/img/logo.png" alt="Logo Reciclaje Sólido" style="width: 128px; height: 128px;" class="mx-auto">
                </div>
                
                <div class="alert alert-info" role="alert">
                    <h4 class="alert-heading">Bienvenido al Panel</h4>
                    <p>Desde aquí puedes gestionar los usuarios, roles, solicitudes y reportes del sistema.</p>
                    <hr>
                    <p class="mb-0">Utiliza el menú de navegación superior para acceder a las diferentes funciones administrativas.</p>
                </div>
                
                <div id="clock" class="clock text-center mt-auto fs-4"></div>
            </div>
        </div>
        
        <!-- Contenido principal (66%) -->
        <div id="dashboard-content" class="col-12 col-md-8">
            <div class="glass-card">
                <h3 class="fs-5 fw-bold mb-4">Resumen del Sistema</h3>
                
                <!-- Tarjetas de métricas -->
                <div class="row row-cols-1 row-cols-sm-2 row-cols-lg-3 g-3 mb-4">
                    <!-- Tarjeta para Usuarios Registrados -->
                    <div class="col">
                        <div class="card h-100 border-0 shadow-sm">
                            <div class="card-body text-center">
                                <i class="bi bi-people-fill fs-1 text-primary mb-2"></i>
                                <h4 class="card-title fs-5">Usuarios</h4>
                                <p class="card-text fs-2 fw-bold">120</p>
                                <p class="card-text text-success"><i class="bi bi-arrow-up"></i> +10 desde ayer</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Tarjeta para Nuevas Solicitudes -->
                    <div class="col">
                        <div class="card h-100 border-0 shadow-sm">
                            <div class="card-body text-center">
                                <i class="bi bi-clipboard-plus-fill fs-1 text-info mb-2"></i>
                                <h4 class="card-title fs-5">Solicitudes</h4>
                                <p class="card-text fs-2 fw-bold">15</p>
                                <p class="card-text text-success"><i class="bi bi-arrow-up"></i> +5 desde ayer</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Tarjeta para Problemas Reportados -->
                    <div class="col">
                        <div class="card h-100 border-0 shadow-sm">
                            <div class="card-body text-center">
                                <i class="bi bi-exclamation-triangle-fill fs-1 text-warning mb-2"></i>
                                <h4 class="card-title fs-5">Problemas</h4>
                                <p class="card-text fs-2 fw-bold">8</p>
                                <p class="card-text text-danger"><i class="bi bi-arrow-down"></i> -2 desde ayer</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Gráficos en diseño responsive -->
                <div class="row g-4">
                    <!-- Gráfico de Barras -->
                    <div class="col-12 col-lg-6 mb-4">
                        <div class="card h-100 border-0 shadow-sm">
                            <div class="card-body">
                                <h5 class="card-title">Usuarios Activos</h5>
                                <canvas id="usersChart" height="200"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Gráfico de Solicitudes en Torta -->
                    <div class="col-12 col-lg-6 mb-4">
                        <div class="card h-100 border-0 shadow-sm">
                            <div class="card-body">
                                <h5 class="card-title">Estado de Solicitudes</h5>
                                <canvas id="solicitudesPieChart" height="200"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div th:replace="~{fragments/layout/footer :: footer}"></div>

<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"></script>
<script src="/scripts/adminScript.js"></script>
</body>
</html>
