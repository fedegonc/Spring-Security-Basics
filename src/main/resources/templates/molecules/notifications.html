<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<!-- Notifications molecule that combines alert atoms -->
<div th:fragment="notifications">
    <!-- Check if we have non-empty messages to display AND we're not on the index page -->
    <div th:with="hasError=${(rerror != null && !#strings.isEmpty(#strings.trim(rerror))) || (error != null && !#strings.isEmpty(#strings.trim(error)))},
                 hasSuccess=${(rexito != null && !#strings.isEmpty(#strings.trim(rexito))) || (success != null && !#strings.isEmpty(#strings.trim(success)))},
                 currentPath=${#httpServletRequest.requestURI},
                 isIndexPage=${#strings.endsWith(currentPath, '/index') || #strings.equals(currentPath, '/') || #strings.equals(currentPath, '')}"
         th:if="${(hasError || hasSuccess) && !isIndexPage}" 
         th:replace="~{atoms/alert :: message-alerts}">
    </div>
</div>
</body>
</html>
