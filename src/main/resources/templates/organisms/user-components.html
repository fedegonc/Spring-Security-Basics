<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<body>

<!-- Fragmento: Bienvenida de usuario con Tailwind CSS -->
<div th:fragment="usuario-bienvenida" class="bg-white rounded-lg shadow-md p-6 mb-4">
    <div class="flex flex-col md:flex-row items-center">
        <div class="w-full md:w-2/3 mb-3 md:mb-0 md:pr-4">
            <h1 class="text-xl md:text-2xl font-bold text-gray-800 mb-2" th:text="'¡Bienvenido, ' + ${username} + '!'">
                ¡Bienvenido, Usuario!
            </h1>
            <p class="text-gray-600 mb-3 text-sm">Gestiona todas tus solicitudes de reciclaje desde un solo lugar.</p>
            <div class="flex flex-wrap gap-2">
                <a th:href="@{/user/newsolicitude}" class="bg-green-600 hover:bg-green-700 text-white font-medium px-3 py-1.5 rounded-md shadow-sm transition text-sm">
                    <i class="bi bi-plus-circle mr-1"></i> <span th:text="#{newRequest.title}">Nueva Solicitud</span>
                </a>
                <a th:href="@{/user/view-requests}" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium px-3 py-1.5 rounded-md shadow-sm transition text-sm">
                    <i class="bi bi-list-check mr-1"></i> <span th:text="#{solicitudes}">Solicitudes</span>
                </a>
            </div>
        </div>
        <div class="w-full md:w-1/3 flex justify-center">
            <img src="/img/logov4.png" alt="RSU Reciclaje" class="h-24 w-24 object-contain">
        </div>
    </div>
</div>

<!-- Fragmento: Métricas de usuario con Tailwind CSS -->
<div th:fragment="metricas-user" class="bg-white rounded-lg shadow-md p-6 mb-4">
    <div class="flex items-center mb-4">
        <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center mr-3">
            <i class="bi bi-graph-up text-blue-600 text-xl"></i>
        </div>
        <div>
            <h2 class="text-lg font-semibold text-gray-800">Estadísticas de Reciclaje</h2>
            <p class="text-sm text-gray-600">Resumen de tus solicitudes de reciclaje y su estado actual.</p>
        </div>
    </div>
    
    <!-- Tarjetas de Métricas -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4" role="region" aria-label="Estadísticas de solicitudes">
        <!-- Solicitudes activas -->
        <div class="bg-white rounded-lg border border-blue-200 shadow-sm p-4">
            <div class="flex justify-between items-center mb-3">
                <h3 class="text-sm font-semibold text-blue-600">Activas</h3>
                <span class="w-10 h-10 rounded-full bg-blue-50 flex items-center justify-center">
                    <i class="bi bi-hourglass-split text-blue-600"></i>
                </span>
            </div>
            <p class="text-2xl font-bold text-gray-800" aria-label="15 solicitudes activas">15</p>
            <div class="mt-3 flex items-center" aria-label="85% del total">
                <div class="w-full mr-2 bg-gray-200 rounded-full h-2">
                    <div class="bg-blue-600 h-2 rounded-full" style="width: 85%"></div>
                </div>
                <span class="text-xs font-medium text-gray-600">85%</span>
            </div>
        </div>
        
        <!-- Solicitudes aceptadas -->
        <div class="bg-white rounded-lg border border-green-200 shadow-sm p-4">
            <div class="flex justify-between items-center mb-3">
                <h3 class="text-sm font-semibold text-green-600">Aceptadas</h3>
                <span class="w-10 h-10 rounded-full bg-green-50 flex items-center justify-center">
                    <i class="bi bi-check-circle text-green-600"></i>
                </span>
            </div>
            <p class="text-2xl font-bold text-gray-800" aria-label="4 solicitudes aceptadas">4</p>
            <div class="mt-3 flex items-center" aria-label="22% del total">
                <div class="w-full mr-2 bg-gray-200 rounded-full h-2">
                    <div class="bg-green-600 h-2 rounded-full" style="width: 22%"></div>
                </div>
                <span class="text-xs font-medium text-gray-600">22%</span>
            </div>
        </div>
        
        <!-- Solicitudes rechazadas -->
        <div class="bg-white rounded-lg border border-red-200 shadow-sm p-4">
            <div class="flex justify-between items-center mb-3">
                <h3 class="text-sm font-semibold text-red-600">Rechazadas</h3>
                <span class="w-10 h-10 rounded-full bg-red-50 flex items-center justify-center">
                    <i class="bi bi-x-circle text-red-600"></i>
                </span>
            </div>
            <p class="text-2xl font-bold text-gray-800" aria-label="2 solicitudes rechazadas">2</p>
            <div class="mt-3 flex items-center" aria-label="11% del total">
                <div class="w-full mr-2 bg-gray-200 rounded-full h-2">
                    <div class="bg-red-600 h-2 rounded-full" style="width: 11%"></div>
                </div>
                <span class="text-xs font-medium text-gray-600">11%</span>
            </div>
        </div>
        
        <!-- Solicitudes en proceso -->
        <div class="bg-white rounded-lg border border-yellow-200 shadow-sm p-4">
            <div class="flex justify-between items-center mb-3">
                <h3 class="text-sm font-semibold text-yellow-600">En Proceso</h3>
                <span class="w-10 h-10 rounded-full bg-yellow-50 flex items-center justify-center">
                    <i class="bi bi-arrow-repeat text-yellow-600"></i>
                </span>
            </div>
            <p class="text-2xl font-bold text-gray-800" aria-label="7 solicitudes en proceso">7</p>
            <div class="mt-3 flex items-center" aria-label="40% del total">
                <div class="w-full mr-2 bg-gray-200 rounded-full h-2">
                    <div class="bg-yellow-600 h-2 rounded-full" style="width: 40%"></div>
                </div>
                <span class="text-xs font-medium text-gray-600">40%</span>
            </div>
        </div>
    </div>
</div>

<!-- Fragmento: Estadísticas de usuario -->
<div th:fragment="estadisticas-user" class="bg-white rounded-lg shadow-md p-6 mb-4">
    <div class="flex items-center mb-4">
        <div class="w-10 h-10 rounded-full bg-green-100 flex items-center justify-center mr-3">
            <i class="bi bi-bar-chart-line text-green-600 text-xl"></i>
        </div>
        <div>
            <h2 class="text-lg font-semibold text-gray-800">Mis Estadísticas</h2>
            <p class="text-sm text-gray-600">Análisis de tu actividad de reciclaje</p>
        </div>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Gráfico de barras -->
        <div class="bg-gray-50 rounded-lg p-4">
            <h3 class="text-base font-medium mb-3 text-gray-700">Solicitudes por Categoría</h3>
            <div class="h-64 flex items-end space-x-2">
                <div class="flex flex-col items-center">
                    <div class="w-12 bg-green-500 rounded-t" style="height: 40%"></div>
                    <span class="text-xs mt-1">Papel</span>
                </div>
                <div class="flex flex-col items-center">
                    <div class="w-12 bg-blue-500 rounded-t" style="height: 65%"></div>
                    <span class="text-xs mt-1">Plástico</span>
                </div>
                <div class="flex flex-col items-center">
                    <div class="w-12 bg-yellow-500 rounded-t" style="height: 30%"></div>
                    <span class="text-xs mt-1">Metal</span>
                </div>
                <div class="flex flex-col items-center">
                    <div class="w-12 bg-purple-500 rounded-t" style="height: 55%"></div>
                    <span class="text-xs mt-1">Vidrio</span>
                </div>
                <div class="flex flex-col items-center">
                    <div class="w-12 bg-red-500 rounded-t" style="height: 20%"></div>
                    <span class="text-xs mt-1">Otros</span>
                </div>
            </div>
        </div>
        
        <!-- Estadísticas de progreso -->
        <div class="bg-gray-50 rounded-lg p-4">
            <h3 class="text-base font-medium mb-3 text-gray-700">Progreso Mensual</h3>
            <div class="space-y-4">
                <div>
                    <div class="flex justify-between mb-1">
                        <span class="text-sm font-medium text-gray-700">Enero</span>
                        <span class="text-sm font-medium text-gray-700">80%</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2">
                        <div class="bg-green-600 h-2 rounded-full" style="width: 80%"></div>
                    </div>
                </div>
                <div>
                    <div class="flex justify-between mb-1">
                        <span class="text-sm font-medium text-gray-700">Febrero</span>
                        <span class="text-sm font-medium text-gray-700">65%</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2">
                        <div class="bg-green-600 h-2 rounded-full" style="width: 65%"></div>
                    </div>
                </div>
                <div>
                    <div class="flex justify-between mb-1">
                        <span class="text-sm font-medium text-gray-700">Marzo</span>
                        <span class="text-sm font-medium text-gray-700">90%</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2">
                        <div class="bg-green-600 h-2 rounded-full" style="width: 90%"></div>
                    </div>
                </div>
                <div>
                    <div class="flex justify-between mb-1">
                        <span class="text-sm font-medium text-gray-700">Abril</span>
                        <span class="text-sm font-medium text-gray-700">75%</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2">
                        <div class="bg-green-600 h-2 rounded-full" style="width: 75%"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Fragmento: Formulario de perfil de usuario -->
<div th:fragment="profile-form" class="space-y-4">
    <!-- Datos personales -->
    <div>
        <label for="username" class="block text-sm font-medium text-gray-700 mb-1">
            Nombre de Usuario <span class="text-red-500">*</span>
        </label>
        <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <i class="bi bi-person text-gray-400"></i>
            </div>
            <input type="text" id="username" name="username" th:value="${user.username}"
                   class="pl-10 block w-full py-2 px-3 border border-gray-300 rounded-md focus:outline-none focus:ring-green-500 focus:border-green-500 bg-gray-100"
                   readonly>
            <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                <i class="bi bi-lock-fill text-gray-400"></i>
            </div>
        </div>
    </div>

    <!-- Nombre completo -->
    <div>
        <label for="name" class="block text-sm font-medium text-gray-700 mb-1">
            Nombre Completo <span class="text-red-500">*</span>
        </label>
        <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <i class="bi bi-person-badge text-gray-400"></i>
            </div>
            <input type="text" id="name" name="name" th:value="${user.name}"
                   class="pl-10 block w-full py-2 px-3 border border-gray-300 rounded-md focus:outline-none focus:ring-green-500 focus:border-green-500"
                   required>
        </div>
    </div>

    <!-- Email -->
    <div>
        <label for="email" class="block text-sm font-medium text-gray-700 mb-1">
            Correo Electrónico <span class="text-red-500">*</span>
        </label>
        <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <i class="bi bi-envelope text-gray-400"></i>
            </div>
            <input type="email" id="email" name="email" th:value="${user.email}"
                   class="pl-10 block w-full py-2 px-3 border border-gray-300 rounded-md focus:outline-none focus:ring-green-500 focus:border-green-500"
                   required>
        </div>
    </div>

    <!-- Tipo de Usuario -->
    <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">
            Tipo de Usuario
        </label>
        <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <i class="bi bi-person-badge text-gray-400"></i>
            </div>
            <input type="text" th:value="${user.role}" 
                   class="pl-10 block w-full py-2 px-3 border border-gray-300 rounded-md focus:outline-none focus:ring-green-500 focus:border-green-500 bg-gray-100"
                   readonly>
            <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                <i class="bi bi-lock-fill text-gray-400"></i>
            </div>
        </div>
        <div class="flex items-center mt-1">
            <p class="text-xs text-gray-500 mr-2">
                Si necesitas cambiar tu tipo de usuario, puedes solicitar un cambio.
            </p>
            <a href="#" class="text-xs text-green-600 hover:text-green-800 font-medium">
                Solicitar cambio
            </a>
        </div>
    </div>

    <!-- Botones de acción -->
    <div class="mt-6 flex justify-end">
        <button type="submit" class="bg-green-600 hover:bg-green-700 text-white font-medium px-4 py-2 rounded-md shadow-sm transition flex items-center">
            <i class="bi bi-check-circle mr-2"></i>
            <span>Guardar Cambios</span>
        </button>
    </div>
</div>

<!-- Fragmento: Publicaciones de usuario -->
<div th:fragment="publicaciones-user" class="bg-white rounded-lg shadow-md p-6 mb-4">
    <div class="flex items-center mb-4">
        <div class="w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center mr-3">
            <i class="bi bi-newspaper text-purple-600 text-xl"></i>
        </div>
        <div>
            <h2 class="text-lg font-semibold text-gray-800">Mis Publicaciones</h2>
            <p class="text-sm text-gray-600">Artículos y contenido que has compartido</p>
        </div>
    </div>
    
    <div class="space-y-4">
        <!-- Publicación 1 -->
        <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition">
            <div class="flex justify-between items-start">
                <h3 class="text-base font-medium text-gray-800">Consejos para reciclar plástico</h3>
                <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full">Publicado</span>
            </div>
            <p class="text-sm text-gray-600 mt-2">Compartí mis mejores consejos para separar y reciclar diferentes tipos de plásticos...</p>
            <div class="flex justify-between items-center mt-3">
                <span class="text-xs text-gray-500">
                    <i class="bi bi-calendar3"></i> 15/03/2023
                </span>
                <div class="flex space-x-2">
                    <button class="text-blue-600 hover:text-blue-800">
                        <i class="bi bi-pencil"></i>
                    </button>
                    <button class="text-red-600 hover:text-red-800">
                        <i class="bi bi-trash"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Publicación 2 -->
        <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition">
            <div class="flex justify-between items-start">
                <h3 class="text-base font-medium text-gray-800">Mi experiencia con compostaje</h3>
                <span class="bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full">Borrador</span>
            </div>
            <p class="text-sm text-gray-600 mt-2">He estado experimentando con compostaje casero y quiero compartir mis resultados...</p>
            <div class="flex justify-between items-center mt-3">
                <span class="text-xs text-gray-500">
                    <i class="bi bi-calendar3"></i> 02/04/2023
                </span>
                <div class="flex space-x-2">
                    <button class="text-blue-600 hover:text-blue-800">
                        <i class="bi bi-pencil"></i>
                    </button>
                    <button class="text-red-600 hover:text-red-800">
                        <i class="bi bi-trash"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Botón para nueva publicación -->
        <div class="text-center mt-4">
            <button class="bg-purple-600 hover:bg-purple-700 text-white font-medium px-4 py-2 rounded-md shadow-sm transition inline-flex items-center">
                <i class="bi bi-plus-circle mr-2"></i> Nueva Publicación
            </button>
        </div>
    </div>
</div>

</body>
</html>
