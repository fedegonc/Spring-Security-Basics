<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
    <!-- 
    Organismo: Tabla de datos
    Descripción: Componente para mostrar datos tabulares con opciones de acciones
    -->
    
    <!-- Tabla básica con cabecera y cuerpo -->
    <div th:fragment="basic(id, headers, items, itemVar, columns, actions)" 
         class="table-responsive glass-card p-4">
        <table th:id="${id}" class="table table-hover">
            <thead class="table-light">
                <tr>
                    <th scope="col" th:each="header : ${headers}" th:text="${header}">Encabezado</th>
                    <th scope="col" th:if="${actions}" class="text-center">Acciones</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="item : ${items}" th:with="itemVar=${item}">
                    <td th:each="column : ${columns}" 
                        th:with="value=${#strings.contains(column, '::') ? '' : 
                                  (#strings.contains(column, '.') ? 
                                  #execInfoStack.getValue(itemVar, column) : 
                                  itemVar[column])}">
                        <!-- Si es una expresión con :: es un fragmento -->
                        <div th:if="${#strings.contains(column, '::')}" 
                             th:replace="${column}">Contenido personalizado</div>
                        <!-- Si no es un fragmento, muestra el valor -->
                        <span th:unless="${#strings.contains(column, '::')}" th:text="${value}">Valor</span>
                    </td>
                    <td th:if="${actions}" class="text-center">
                        <div th:replace="${actions}">Acciones</div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    
    <!-- Tabla con paginación -->
    <div th:fragment="paginated(id, headers, items, itemVar, columns, actions, page)" 
         class="glass-card p-4">
        <div th:replace="~{::basic(${id}, ${headers}, ${items}, ${itemVar}, ${columns}, ${actions})}"></div>
        
        <!-- Paginación -->
        <nav aria-label="Paginación" class="mt-4" th:if="${page != null}">
            <ul class="pagination justify-content-center">
                <li class="page-item" th:classappend="${page.first ? 'disabled' : ''}">
                    <a class="page-link" th:href="${page.first ? '#' : '?page=' + (page.number - 1)}" 
                       aria-label="Anterior">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>
                <li class="page-item" th:each="i : ${#numbers.sequence(0, page.totalPages - 1)}"
                    th:classappend="${i == page.number ? 'active' : ''}">
                    <a class="page-link" th:href="${'?page=' + i}" th:text="${i + 1}">1</a>
                </li>
                <li class="page-item" th:classappend="${page.last ? 'disabled' : ''}">
                    <a class="page-link" th:href="${page.last ? '#' : '?page=' + (page.number + 1)}" 
                       aria-label="Siguiente">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            </ul>
        </nav>
    </div>
    
    <!-- Tabla con búsqueda y filtros -->
    <div th:fragment="filterable(id, headers, items, itemVar, columns, actions, searchForm)" 
         class="glass-card p-4">
        <!-- Formulario de búsqueda -->
        <div class="mb-4" th:if="${searchForm != null}">
            <div th:replace="${searchForm}">Formulario de búsqueda</div>
        </div>
        
        <div th:replace="~{::basic(${id}, ${headers}, ${items}, ${itemVar}, ${columns}, ${actions})}"></div>
    </div>
</body>
</html>
